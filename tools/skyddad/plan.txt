# üìã Projektplan: Skyddad
**Version:** 1.0
**Datum:** `YYYY-MM-DD`
**Namn:** Skyddad

---

## üîç 1. Sammanfattning
Ut√∂ka befintlig l√∂senordsgenerator med en **s√§ker, sj√§lvhostad l√∂sning** f√∂r att:
- Generera **tillf√§lliga l√§nkar** till hemligheter (l√∂senord eller valfri text)
- Begr√§nsa till **1 visning**
- Automatisk f√∂rst√∂ring efter **24 timmar**
- **Kryptera** all data (AES-256)
- M√∂jlighet att dela mer text √§n bara l√∂senord (t.ex. meddelanden, API-nycklar)

---

## ‚öôÔ∏è 2. Teknisk √ñversikt

### üîß Backend
| Komponent       | Teknik               | Ansvar                                   |
|-----------------|----------------------|------------------------------------------|
| Server          | Apache/Nginx + PHP   | Hanterar logik & lagring                 |
| Databas         | SQLite/MySQL         | Lagrar krypterade l√∂senord               |
| Kryptering      | OpenSSL (AES-256-CBC)| S√§kerst√§ller dataskydd                   |
| S√§kerhet        | HTTPS (Let‚Äôs Encrypt)| Krypterad kommunikation                  |

### üé® Frontend
| Komponent       | Teknik         | Ansvar                              |
|-----------------|----------------|-------------------------------------|
| Formul√§r        | HTML + JS      | Inmatning av hemlighet (valfri text) |
| Gr√§nssnitt      | CSS            | Visa l√§nk & hemlighet               |

---

## üõ†Ô∏è 3. Implementering

### üìÇ Filstruktur
/password-share
‚îú‚îÄ‚îÄ includes/
‚îÇ ‚îú‚îÄ‚îÄ config.php # Krypteringsnyckel
‚îÇ ‚îî‚îÄ‚îÄ db.php # Databaskoppling
‚îú‚îÄ‚îÄ create.php # Sparar hemlighet
‚îú‚îÄ‚îÄ view.php # Visar & raderar
‚îî‚îÄ‚îÄ templates/
‚îî‚îÄ‚îÄ share-form.php # Delningsformul√§r

### üíæ Databasschema (SQL)
```sql
CREATE TABLE passwords (
    id VARCHAR(32) PRIMARY KEY,
    encrypted_data TEXT NOT NULL,
    views_left INT DEFAULT 1,
    expires_at INT NOT NULL  -- Unix timestamp
);
```
> **Notera:** `encrypted_data` kan nu inneh√•lla valfri text, inte bara l√∂senord.

API-Endpoints
create.php
<?php
$password = $_POST['password'];
$id = bin2hex(random_bytes(16));
$encrypted = openssl_encrypt($password, 'AES-256-CBC', ENCRYPTION_KEY);
// Spara i databas...
echo "https://din-webb.se/view.php?id=$id";
?>

view.php

<?php
$id = $_GET['id'];
// H√§mta fr√•n DB ‚Üí dekryptera ‚Üí radera
echo "L√∂senord: $decrypted_password";
?>

4. S√§kerhets√•tg√§rder
‚úÖ HTTPS (obligatoriskt)

‚úÖ CSRF-skydd p√• alla formul√§r

‚úÖ Rate Limiting (max 10 f√∂rfr√•gningar/minut)

‚úÖ Loggning av IP-adresser f√∂r rate limiting och √∂vervakning

‚úÖ S√§kra filbeh√∂righeter p√• config.php (endast l√§sbart f√∂r webbservern)

‚úÖ Anv√§nd environment variables f√∂r k√§nsliga nycklar (t.ex. ENCRYPTION_KEY)

> **OBS!**  
> F√∂r n√§rvarande ligger databasuppgifter och krypteringsnycklar i k√§llkoden.  
> **Detta m√•ste flyttas till milj√∂variabler (environment variables) innan produktion**  
> f√∂r att undvika s√§kerhetsrisker och h√•rdkodade credentials.

‚úÖ Automatisk st√§dning (cronjob)
0 0 * * * php /path/to/cleanup.php  # K√∂rs dagligen

 5. Testplan
Testfall	F√∂rv√§ntat Resultat
Skapa l√§nk	Krypterat l√∂senord sparas i DB
F√∂rsta visning	L√∂senord visas ‚Üí raderas fr√•n DB
Andra visning	Fel: "L√∂senordet har visats"
F√∂rfallotid (24h)	Fel: "L√∂senordet √§r utg√•nget"
‚è≥ 6. Tidsplan
Aktivitet	Tid (h)	Status
Backend	8	[ ]
Frontend	4	[ ]
Testning	3	[ ]
Dokumentation	2	[ ]
Totalt	17
‚ö†Ô∏è 7. Riskhantering
Risk	√Ötg√§rd
Databasl√§ckage	Kryptera all data med AES-256
Gissningsbara l√§nkar	Anv√§nd random_bytes(16) f√∂r ID:n
Brute force	Rate limiting + IP-begr√§nsning
üìÑ 8. Leverabler
Funktionell backend (create.php, view.php)

Frontend-formul√§r f√∂r delning

Dokumentation (README.md)

‚úçÔ∏è 9. Godk√§nnande
Namn	Roll	Datum	Signatur
[Ditt namn]	Projektledare	[YYYY-MM-DD]	_________
Bifogat:

K√§llkod

Databasschema

Testprotokoll

Skriv ut denna rapport f√∂r referens üñ®Ô∏è

---

## üöÄ M√∂jliga f√∂rb√§ttringar f√∂r framtida versioner

- **F√∂rb√§ttrad integritet:**
  M√∂jlighet att l√§gga till en l√∂senfras/passphrase f√∂r extra skydd. Endast de som har l√∂senfrasen kan visa hemligheten.

- **Sj√§lvf√∂rst√∂rande l√§nkar:**
  Hemligheten raderas permanent fr√•n servern efter visning eller n√§r den har g√•tt ut. Ingen kopia sparas.

- **Efterlevnad och s√§kerhet:**
  Utforma l√∂sningen s√• att den kan hj√§lpa till att m√∂ta krav enligt SOC2, GDPR, CCPA och HIPAA f√∂r s√§ker informationshantering.
  Information om efterlevnad (t.ex. SOC2, ISO 27001) kan dokumenteras f√∂r transparens.

- **S√§ker delning inom team:**
  M√∂jlighet att dela k√§nsliga uppgifter (t.ex. anv√§ndarnamn/l√∂senord, API-nycklar) s√§kert med teammedlemmar.

- **F√∂rhindra l√§ckor:**
  F√∂rhindra att k√§nsliga uppgifter hamnar i e-post eller chattloggar.

- **√Ötkomstloggning:**
  M√∂jlighet att logga n√§r och av vem en hemlighet har visats (utan att kr√§va registrering).

- **Enforce security protocols:**
  St√∂d f√∂r att uppr√§tth√•lla s√§kerhetsrutiner vid hantering av k√§nslig information.

> **Not:** Ingen m√∂jlighet f√∂r anv√§ndarregistrering ska inf√∂ras.

---
